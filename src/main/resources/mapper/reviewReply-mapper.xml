<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.foodreport.domain.review.model.dao.ReviewReplyMapper">
	
	<update id="updateReply" parameterType="ReviewReplyDTO">
		UPDATE
		       FR_REVIEW_REPLY
		   SET
		       REPLY_CONTENT = #{replyContent} 
		     , UPDATE_DATE = SYSDATE
		 WHERE
		       STATUS = 'Y'
		   AND
		       REPLY_NO = #{replyNo}
		   AND
		       MEMBER_NO = #{replyWriter}
	</update>
	
	<update id="deleteReply" parameterType="ReviewReply">
		UPDATE
		       FR_REVIEW_REPLY
		   SET
		       STATUS = 'N'
		     , DELETE_DATE = SYSDATE
		 WHERE
		       STATUS = 'Y'
		   AND
		       REPLY_NO = #{replyNo}
		   AND
		       MEMBER_NO = #{replyWriter} 
		
	</update>
	
	<select id="countReplyLikeByMember" parameterType="ReviewReplyLike" resultType="_int">
		SELECT
		       COUNT(*)
		  FROM
		       FR_REVIEW_REPLY_LIKE
		 WHERE
		       MEMBER_NO = #{memberNo}
		   AND 
		       REPLY_NO = #{replyNo}
	</select>
	
	<insert id="saveReplyLike" parameterType="ReviewReplyLike">
		INSERT
		  INTO
		       FR_REVIEW_REPLY_LIKE
		       (
		       REPLY_NO
		     , MEMBER_NO
		     , CREATE_DATE
		       )
		VALUES
		       (
		       #{replyNo}
		     , #{memberNo}
		     , SYSDATE
		       )
	</insert>
	
	
</mapper>